2022-10-30 01:38:56.647 +02:00 [INF] User profile is available. Using 'C:\Users\Work\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 01:38:57.046 +02:00 [INF] Now listening on: https://localhost:7145
2022-10-30 01:38:57.046 +02:00 [INF] Now listening on: http://localhost:5145
2022-10-30 01:38:57.050 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 01:38:57.050 +02:00 [INF] Hosting environment: Development
2022-10-30 01:38:57.050 +02:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 01:39:00.164 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 01:39:00.164 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 01:39:00.199 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 39.7421ms
2022-10-30 01:39:00.320 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/favicon-16x16.png - -
2022-10-30 01:39:00.353 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 194.9141ms
2022-10-30 01:39:00.411 +02:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2022-10-30 01:39:00.413 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/favicon-16x16.png - - - 0 665 image/png 93.7471ms
2022-10-30 01:39:00.445 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 01:39:00.686 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 240.5854ms
2022-10-30 01:39:11.209 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 50
2022-10-30 01:39:11.335 +02:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 01:39:11.358 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 01:39:12.364 +02:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 01:39:13.170 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 01:39:13.564 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 01:39:13.590 +02:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 01:39:13.600 +02:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2236.199ms
2022-10-30 01:39:13.601 +02:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 01:39:13.611 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 50 - 200 - application/json;+charset=utf-8 2402.5419ms
2022-10-30 01:39:20.930 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Auth?name=string - -
2022-10-30 01:39:20.931 +02:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.GetRole (CarDealer)'
2022-10-30 01:39:20.933 +02:00 [INF] Route matched with {action = "GetRole", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRole(System.String) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 01:39:20.943 +02:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 01:39:20.995 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE lower("u"."Username") = @__ToLower_0
LIMIT 1
2022-10-30 01:39:20.995 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-10-30 01:39:20.995 +02:00 [INF] Executed action CarDealer.Controllers.AuthController.GetRole (CarDealer) in 62.3959ms
2022-10-30 01:39:20.995 +02:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.GetRole (CarDealer)'
2022-10-30 01:39:20.995 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Auth?name=string - - - 200 - text/plain;+charset=utf-8 65.8979ms
2022-10-30 01:39:44.823 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7145/api/Car application/json 114
2022-10-30 01:39:44.917 +02:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.UpdateCar (CarDealer)'
2022-10-30 01:39:44.918 +02:00 [INF] Route matched with {action = "UpdateCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult UpdateCar(CarDealer.Domain.GetCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 01:39:45.083 +02:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 01:39:45.088 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__updateCar_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CarType", "c"."Hp", "c"."Make", "c"."Model", "c"."Seats", "c"."Year"
FROM "Cars" AS "c"
WHERE "c"."Id" = @__updateCar_Id_0
LIMIT 1
2022-10-30 01:39:45.192 +02:00 [ERR] Car with Id : 5 does not exist
2022-10-30 01:39:45.192 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-30 01:39:45.192 +02:00 [INF] Executed action CarDealer.Controllers.CarController.UpdateCar (CarDealer) in 274.2747ms
2022-10-30 01:39:45.193 +02:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.UpdateCar (CarDealer)'
2022-10-30 01:39:45.193 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7145/api/Car application/json 114 - 5 - text/plain;+charset=utf-8 369.6046ms
2022-10-30 01:43:49.125 +02:00 [INF] User profile is available. Using 'C:\Users\Work\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 01:43:49.436 +02:00 [INF] Now listening on: https://localhost:7145
2022-10-30 01:43:49.436 +02:00 [INF] Now listening on: http://localhost:5145
2022-10-30 01:43:49.439 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 01:43:49.439 +02:00 [INF] Hosting environment: Development
2022-10-30 01:43:49.439 +02:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 01:43:50.251 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 01:43:50.251 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 01:43:50.293 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 46.9907ms
2022-10-30 01:43:50.404 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 159.1198ms
2022-10-30 01:43:57.895 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 50
2022-10-30 01:43:58.047 +02:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 01:43:58.068 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 01:43:58.980 +02:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 01:43:59.730 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 01:44:00.121 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 01:44:00.147 +02:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 01:44:00.157 +02:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2084.5182ms
2022-10-30 01:44:00.158 +02:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 01:44:00.171 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 50 - 200 - application/json;+charset=utf-8 2275.6372ms
2022-10-30 18:52:15.808 +01:00 [INF] User profile is available. Using 'C:\Users\Work\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 18:52:16.181 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 18:52:16.181 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 18:52:16.186 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 18:52:16.186 +01:00 [INF] Hosting environment: Development
2022-10-30 18:52:16.186 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 18:52:17.326 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 18:52:17.326 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 18:52:17.372 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 51.0512ms
2022-10-30 18:52:17.578 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 258.1868ms
2022-10-30 18:57:56.307 +01:00 [INF] User profile is available. Using 'C:\Users\Work\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 18:57:56.752 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 18:57:56.752 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 18:57:56.756 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 18:57:56.757 +01:00 [INF] Hosting environment: Development
2022-10-30 18:57:56.757 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 18:57:57.413 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 18:57:57.413 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 18:57:57.461 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 53.2289ms
2022-10-30 18:57:57.569 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 163.4891ms
2022-10-30 18:58:55.710 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 18:59:10.979 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 18:59:11.137 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2022-10-30 18:59:11.253 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2022-10-30 18:59:11.263 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-10-30 18:59:11.266 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2022-10-30 18:59:11.284 +01:00 [INF] Applying migration '20221026173243_New'.
2022-10-30 18:59:11.305 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Cars" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Cars" PRIMARY KEY AUTOINCREMENT,
    "Make" TEXT NOT NULL,
    "Model" TEXT NOT NULL,
    "Seats" INTEGER NOT NULL,
    "Year" INTEGER NOT NULL,
    "Hp" INTEGER NOT NULL,
    "CarType" INTEGER NOT NULL
);
2022-10-30 18:59:11.305 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY AUTOINCREMENT,
    "Role" TEXT NOT NULL,
    "FirstName" TEXT NOT NULL,
    "LastName" TEXT NOT NULL,
    "Username" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "PasswordHash" BLOB NOT NULL,
    "PasswordSalt" BLOB NOT NULL,
    "RefreshToken" TEXT NOT NULL,
    "TokenCreated" TEXT NOT NULL,
    "TokenExpires" TEXT NOT NULL
);
2022-10-30 18:59:11.305 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20221026173243_New', '6.0.10');
2022-10-30 18:59:11.312 +01:00 [INF] Applying migration '20221030175855_BB'.
2022-10-30 18:59:11.327 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Cars" ADD "CarManufacturerId" INTEGER NOT NULL DEFAULT 0;
2022-10-30 18:59:11.327 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CarManufacturers" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_CarManufacturers" PRIMARY KEY AUTOINCREMENT,
    "Make" TEXT NOT NULL,
    "Country" TEXT NOT NULL
);
2022-10-30 18:59:11.327 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Cars_CarManufacturerId" ON "Cars" ("CarManufacturerId");
2022-10-30 18:59:11.327 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Cars" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Cars" PRIMARY KEY AUTOINCREMENT,
    "CarManufacturerId" INTEGER NOT NULL,
    "CarType" INTEGER NOT NULL,
    "Hp" INTEGER NOT NULL,
    "Model" TEXT NOT NULL,
    "Seats" INTEGER NOT NULL,
    "Year" INTEGER NOT NULL,
    CONSTRAINT "FK_Cars_CarManufacturers_CarManufacturerId" FOREIGN KEY ("CarManufacturerId") REFERENCES "CarManufacturers" ("Id") ON DELETE CASCADE
);
2022-10-30 18:59:11.328 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Cars" ("Id", "CarManufacturerId", "CarType", "Hp", "Model", "Seats", "Year")
SELECT "Id", "CarManufacturerId", "CarType", "Hp", "Model", "Seats", "Year"
FROM "Cars";
2022-10-30 18:59:11.331 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2022-10-30 18:59:11.331 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Cars";
2022-10-30 18:59:11.332 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Cars" RENAME TO "Cars";
2022-10-30 18:59:11.335 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2022-10-30 18:59:11.335 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Cars_CarManufacturerId" ON "Cars" ("CarManufacturerId");
2022-10-30 18:59:11.335 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20221030175855_BB', '6.0.10');
2022-10-30 18:59:18.772 +01:00 [INF] User profile is available. Using 'C:\Users\Work\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 18:59:19.043 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 18:59:19.043 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 18:59:19.046 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 18:59:19.046 +01:00 [INF] Hosting environment: Development
2022-10-30 18:59:19.046 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 18:59:19.513 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 18:59:19.513 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 18:59:19.548 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 39.3392ms
2022-10-30 18:59:19.652 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 145.2826ms
2022-10-30 18:59:28.669 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/register application/json 171
2022-10-30 18:59:28.836 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Register (CarDealer)'
2022-10-30 18:59:28.862 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(CarDealer.Domain.Auth.RegisterDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 18:59:34.041 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Register (CarDealer) in 5173.1733ms
2022-10-30 18:59:34.044 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Register (CarDealer)'
2022-10-30 18:59:34.048 +01:00 [ERR] An unhandled exception has occurred while executing the request.
CarDealer.Exceptions.UserException: Please enter a valid email format.
   at CarDealer.Helpers.Validate.ValidateUser(RegisterDto user) in C:\Users\Work\source\repos\CarDealer\CarDealer\Helpers\Validate.cs:line 55
   at CarDealer.Service.Implementation.AuthService.Register(RegisterDto req) in C:\Users\Work\source\repos\CarDealer\CarDealer\Service\Implementation\AuthService.cs:line 46
   at CarDealer.Controllers.AuthController.Register(RegisterDto req) in C:\Users\Work\source\repos\CarDealer\CarDealer\Controllers\AuthController.cs:line 22
   at lambda_method2(Closure , Object , Object[] )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 18:59:34.117 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/register application/json 171 - 500 - text/plain;+charset=utf-8 5448.0975ms
2022-10-30 18:59:52.086 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/register application/json 182
2022-10-30 18:59:52.094 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Register (CarDealer)'
2022-10-30 18:59:52.099 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(CarDealer.Domain.Auth.RegisterDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 18:59:53.010 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 18:59:53.591 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Username" = @__req_Username_0)
2022-10-30 18:59:53.611 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__req_Email_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__req_Email_0)
2022-10-30 18:59:53.817 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 16), @p1='?' (Size = 6), @p2='?' (Size = 6), @p3='?' (Size = 64) (DbType = Binary), @p4='?' (Size = 128) (DbType = Binary), @p5='?', @p6='?' (Size = 5), @p7='?' (DbType = DateTime), @p8='?' (DbType = DateTime), @p9='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "FirstName", "LastName", "PasswordHash", "PasswordSalt", "RefreshToken", "Role", "TokenCreated", "TokenExpires", "Username")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT "Id"
FROM "Users"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 18:59:53.887 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Domain.Auth.UserDto'.
2022-10-30 18:59:53.893 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Register (CarDealer) in 1793.1194ms
2022-10-30 18:59:53.893 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Register (CarDealer)'
2022-10-30 18:59:53.900 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/register application/json 182 - 200 - application/json;+charset=utf-8 1813.9150ms
2022-10-30 18:59:59.679 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 18:59:59.681 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 18:59:59.682 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 18:59:59.688 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 18:59:59.732 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 18:59:59.940 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 18:59:59.943 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 18:59:59.944 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 261.935ms
2022-10-30 18:59:59.944 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 18:59:59.945 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 266.0530ms
2022-10-30 19:02:02.725 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:02:03.036 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:02:03.037 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:02:03.039 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:02:03.039 +01:00 [INF] Hosting environment: Development
2022-10-30 19:02:03.039 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:02:04.457 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger - -
2022-10-30 19:02:04.630 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger - - - 301 0 - 178.0946ms
2022-10-30 19:02:04.648 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:02:04.930 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/swagger-ui.css - -
2022-10-30 19:02:04.930 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/swagger-ui-bundle.js - -
2022-10-30 19:02:04.930 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/swagger-ui-standalone-preset.js - -
2022-10-30 19:02:04.931 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:02:04.937 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 6.7721ms
2022-10-30 19:02:04.937 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 289.4521ms
2022-10-30 19:02:05.024 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-10-30 19:02:05.024 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-10-30 19:02:05.024 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/swagger-ui.css - - - 200 143632 text/css 93.7991ms
2022-10-30 19:02:05.024 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 93.4772ms
2022-10-30 19:02:05.034 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-10-30 19:02:05.034 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 103.8630ms
2022-10-30 19:02:05.100 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:02:05.244 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 143.4927ms
2022-10-30 19:02:05.600 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/favicon-32x32.png - -
2022-10-30 19:02:05.601 +01:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-10-30 19:02:05.601 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/favicon-32x32.png - - - 200 628 image/png 0.7854ms
2022-10-30 19:02:05.708 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:02:06.025 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 317.4356ms
2022-10-30 19:02:18.065 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:02:18.142 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:02:18.161 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:02:19.328 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:02:19.882 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:02:20.234 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:02:20.258 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:02:20.266 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2099.0821ms
2022-10-30 19:02:20.266 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:02:20.276 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 2211.7419ms
2022-10-30 19:02:48.418 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/CarManufacturer application/json 43
2022-10-30 19:02:48.516 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.AddCarManufacturer (CarDealer)'
2022-10-30 19:02:48.517 +01:00 [INF] Route matched with {action = "AddCarManufacturer", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCarManufacturer(CarDealer.Domain.AddCarManufacturer) on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:02:48.519 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.AddCarManufacturer (CarDealer) in 1.5959ms
2022-10-30 19:02:48.520 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.AddCarManufacturer (CarDealer)'
2022-10-30 19:02:48.524 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'CarDealer.Service.Abstraction.ICarManufacturerService' while attempting to activate 'CarDealer.Controllers.CarManufacturerController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method97(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:02:48.554 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/CarManufacturer application/json 43 - 500 - text/plain;+charset=utf-8 136.6415ms
2022-10-30 19:03:05.438 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Auth?name=string - -
2022-10-30 19:03:05.440 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.GetRole (CarDealer)'
2022-10-30 19:03:05.442 +01:00 [INF] Route matched with {action = "GetRole", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRole(System.String) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:03:05.459 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:03:05.516 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE lower("u"."Username") = @__ToLower_0
LIMIT 1
2022-10-30 19:03:05.516 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-10-30 19:03:05.516 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.GetRole (CarDealer) in 74.3191ms
2022-10-30 19:03:05.516 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.GetRole (CarDealer)'
2022-10-30 19:03:05.516 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Auth?name=string - - - 200 - text/plain;+charset=utf-8 78.4532ms
2022-10-30 19:03:11.690 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:03:11.690 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:03:11.691 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:03:11.692 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 0.575ms
2022-10-30 19:03:11.692 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:03:11.694 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'CarDealer.Service.Abstraction.ICarManufacturerService' while attempting to activate 'CarDealer.Controllers.CarManufacturerController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method104(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:03:11.695 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 5.3635ms
2022-10-30 19:04:12.201 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:04:12.639 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:04:12.639 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:04:12.644 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:04:12.644 +01:00 [INF] Hosting environment: Development
2022-10-30 19:04:12.644 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:04:13.467 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:04:13.861 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 396.2435ms
2022-10-30 19:04:13.985 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:04:13.986 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:04:13.995 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 9.2501ms
2022-10-30 19:04:14.051 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.1396ms
2022-10-30 19:04:14.337 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:04:14.608 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 271.2164ms
2022-10-30 19:04:47.813 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:04:48.238 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:04:48.238 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:04:48.243 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:04:48.243 +01:00 [INF] Hosting environment: Development
2022-10-30 19:04:48.243 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:04:48.872 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:04:49.230 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:04:49.239 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 7.1694ms
2022-10-30 19:04:49.239 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 372.8129ms
2022-10-30 19:04:49.376 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:04:49.423 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 47.4194ms
2022-10-30 19:04:49.593 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:04:49.818 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 225.5014ms
2022-10-30 19:04:54.012 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:04:54.111 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:04:54.121 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:04:54.440 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:04:54.454 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 328.1058ms
2022-10-30 19:04:54.456 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:04:54.460 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:04:54.495 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 483.0202ms
2022-10-30 19:05:21.018 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:05:21.020 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:05:21.044 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:05:22.057 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:05:22.690 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:05:23.060 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:05:23.083 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:05:23.084 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2040.035ms
2022-10-30 19:05:23.084 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:05:23.091 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 2073.3727ms
2022-10-30 19:05:34.449 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:05:34.452 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:05:34.453 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:05:34.453 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:05:34.455 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 1.9099ms
2022-10-30 19:05:34.455 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:05:34.456 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:05:34.459 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 10.3582ms
2022-10-30 19:05:37.686 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:05:37.687 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:05:37.687 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:05:37.689 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:05:37.691 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 4.2454ms
2022-10-30 19:05:37.691 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:05:37.692 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:05:37.695 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 9.0181ms
2022-10-30 19:05:51.197 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/CarManufacturer application/json 43
2022-10-30 19:05:51.198 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.AddCarManufacturer (CarDealer)'
2022-10-30 19:05:51.201 +01:00 [INF] Route matched with {action = "AddCarManufacturer", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCarManufacturer(CarDealer.Domain.AddCarManufacturer) on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:05:51.238 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:05:51.307 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 7), @p1='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarManufacturers" ("Country", "Make")
VALUES (@p0, @p1);
SELECT "Id"
FROM "CarManufacturers"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:05:51.343 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Country", "c"."Make"
FROM "CarManufacturers" AS "c"
2022-10-30 19:05:51.344 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-30 19:05:51.345 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.AddCarManufacturer (CarDealer) in 143.7771ms
2022-10-30 19:05:51.345 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.AddCarManufacturer (CarDealer)'
2022-10-30 19:05:51.346 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/CarManufacturer application/json 43 - 200 - application/json;+charset=utf-8 148.6442ms
2022-10-30 19:05:59.075 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:05:59.075 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:05:59.075 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:05:59.075 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:05:59.077 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 1.7466ms
2022-10-30 19:05:59.077 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:05:59.078 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:05:59.081 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 5.9057ms
2022-10-30 19:06:24.823 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 102
2022-10-30 19:06:24.900 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:06:22', Current time: '30/10/2022 18:06:24'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-30 19:06:24.903 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:06:22', Current time: '30/10/2022 18:06:24'.
2022-10-30 19:06:24.912 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2022-10-30 19:06:24.922 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:06:24.923 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 102 - 401 0 - 100.0052ms
2022-10-30 19:06:41.083 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/Refresh application/json 485
2022-10-30 19:06:41.090 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer)'
2022-10-30 19:06:41.092 +01:00 [INF] Route matched with {action = "GetRefreshToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRefreshToken(CarDealer.Models.Token) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:06:41.210 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2022-10-30 19:06:41.211 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer) in 118.8647ms
2022-10-30 19:06:41.211 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer)'
2022-10-30 19:06:41.211 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/Refresh application/json 485 - 401 - text/plain;+charset=utf-8 128.2531ms
2022-10-30 19:06:56.972 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 102
2022-10-30 19:06:56.973 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:06:22', Current time: '30/10/2022 18:06:56'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-30 19:06:56.973 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:06:22', Current time: '30/10/2022 18:06:56'.
2022-10-30 19:06:56.973 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2022-10-30 19:06:56.974 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:06:56.974 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 102 - 401 0 - 1.8955ms
2022-10-30 19:07:02.944 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 102
2022-10-30 19:07:02.945 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:06:22', Current time: '30/10/2022 18:07:02'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-30 19:07:02.945 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:06:22', Current time: '30/10/2022 18:07:02'.
2022-10-30 19:07:02.945 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2022-10-30 19:07:02.946 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:07:02.946 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 102 - 401 0 - 1.7683ms
2022-10-30 19:07:18.019 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car - -
2022-10-30 19:07:18.024 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:06:22', Current time: '30/10/2022 18:07:18'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-30 19:07:18.024 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:06:22', Current time: '30/10/2022 18:07:18'.
2022-10-30 19:07:18.025 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-30 19:07:18.025 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:07:18.025 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car - - - 401 0 - 7.1755ms
2022-10-30 19:07:55.615 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/Refresh application/json 485
2022-10-30 19:07:55.615 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer)'
2022-10-30 19:07:55.615 +01:00 [INF] Route matched with {action = "GetRefreshToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRefreshToken(CarDealer.Models.Token) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:07:55.665 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2022-10-30 19:07:55.665 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer) in 49.4439ms
2022-10-30 19:07:55.665 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer)'
2022-10-30 19:07:55.665 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/Refresh application/json 485 - 401 - text/plain;+charset=utf-8 51.3024ms
2022-10-30 19:08:10.160 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:08:10.161 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:08:10.161 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:08:10.206 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:08:10.211 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:08:10.211 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:08:10.215 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:08:10.215 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 54.2259ms
2022-10-30 19:08:10.215 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:08:10.215 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 54.7935ms
2022-10-30 19:08:24.256 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car - -
2022-10-30 19:08:24.258 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:08:24.259 +01:00 [INF] Route matched with {action = "GetAll", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:08:24.260 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:08:24.264 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CarManufacturerId", "c"."CarType", "c"."Hp", "c"."Model", "c"."Seats", "c"."Year"
FROM "Cars" AS "c"
2022-10-30 19:08:24.265 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarDealer.Domain.GetCarDto, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-30 19:08:24.266 +01:00 [INF] Executed action CarDealer.Controllers.CarController.GetAll (CarDealer) in 7.0269ms
2022-10-30 19:08:24.266 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:08:24.267 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car - - - 200 - application/json;+charset=utf-8 10.7864ms
2022-10-30 19:08:41.975 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 103
2022-10-30 19:08:41.976 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:08:41.978 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(Int32, CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:08:41.999 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:08:42.002 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__carMakeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Country", "c"."Make"
FROM "CarManufacturers" AS "c"
WHERE "c"."Id" = @__carMakeId_0
LIMIT 1
2022-10-30 19:09:44.853 +01:00 [FTL] Object reference not set to an instance of an object.
2022-10-30 19:09:44.854 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:09:44.854 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 62877.842ms
2022-10-30 19:09:44.854 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:09:44.854 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 103 - 400 - text/plain;+charset=utf-8 62880.4896ms
2022-10-30 19:09:55.130 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car/Id - -
2022-10-30 19:09:55.131 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:09:10', Current time: '30/10/2022 18:09:55'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-30 19:09:55.131 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:09:10', Current time: '30/10/2022 18:09:55'.
2022-10-30 19:09:55.131 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2022-10-30 19:09:55.131 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:09:55.131 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car/Id - - - 401 0 - 1.3720ms
2022-10-30 19:10:23.588 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/Refresh application/json 485
2022-10-30 19:10:23.589 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer)'
2022-10-30 19:10:23.592 +01:00 [INF] Route matched with {action = "GetRefreshToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRefreshToken(CarDealer.Models.Token) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:10:23.639 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2022-10-30 19:10:23.639 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer) in 46.7758ms
2022-10-30 19:10:23.639 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer)'
2022-10-30 19:10:23.639 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/Refresh application/json 485 - 401 - text/plain;+charset=utf-8 50.7908ms
2022-10-30 19:29:12.611 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:29:13.034 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:29:13.034 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:29:13.040 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:29:13.040 +01:00 [INF] Hosting environment: Development
2022-10-30 19:29:13.040 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:29:13.669 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:29:14.046 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 380.5242ms
2022-10-30 19:29:14.163 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:29:14.163 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:29:14.176 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 12.8403ms
2022-10-30 19:29:14.195 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 32.0365ms
2022-10-30 19:29:14.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:29:14.606 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 236.9090ms
2022-10-30 19:29:26.153 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:29:26.234 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:29:26.254 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:29:27.364 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:29:27.926 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:29:28.269 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:29:28.297 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:29:28.305 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2045.7488ms
2022-10-30 19:29:28.306 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:29:28.315 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 2161.8779ms
2022-10-30 19:29:45.031 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:29:45.033 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:29:45.034 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:29:45.136 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:29:45.141 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 106.6696ms
2022-10-30 19:29:45.142 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:29:45.145 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:29:45.178 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 147.1393ms
2022-10-30 19:29:56.926 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMakeById?id=1 - -
2022-10-30 19:29:56.929 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:29:56.931 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers(Int32) on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:29:56.940 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:29:56.951 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Country", "c"."Make"
FROM "CarManufacturers" AS "c"
WHERE "c"."Id" = @__id_0
LIMIT 1
2022-10-30 19:29:56.963 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.CarManufacturer'.
2022-10-30 19:29:56.964 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 32.8556ms
2022-10-30 19:29:56.964 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:29:56.964 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMakeById?id=1 - - - 200 - application/json;+charset=utf-8 38.2764ms
2022-10-30 19:30:10.611 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 103
2022-10-30 19:30:10.701 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:30:10.702 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(Int32, CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:30:10.756 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:30:10.759 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__carMakeId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Country", "c"."Make"
FROM "CarManufacturers" AS "c"
WHERE "c"."Id" = @__carMakeId_0
LIMIT 1
2022-10-30 19:30:32.740 +01:00 [FTL] Object reference not set to an instance of an object.
2022-10-30 19:30:32.741 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:30:32.741 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 22039.1067ms
2022-10-30 19:30:32.741 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:30:32.741 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car?carMakeId=1 application/json 103 - 400 - text/plain;+charset=utf-8 22130.7885ms
2022-10-30 19:31:52.601 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car - -
2022-10-30 19:31:52.623 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:30:28', Current time: '30/10/2022 18:31:52'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-30 19:31:52.625 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:30:28', Current time: '30/10/2022 18:31:52'.
2022-10-30 19:31:52.626 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-30 19:31:52.635 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:31:52.635 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car - - - 401 0 - 34.3035ms
2022-10-30 19:32:10.003 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/Refresh application/json 485
2022-10-30 19:32:10.004 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer)'
2022-10-30 19:32:10.005 +01:00 [INF] Route matched with {action = "GetRefreshToken", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRefreshToken(CarDealer.Models.Token) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:32:10.008 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:32:10.013 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__token_RefreshToken_0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."RefreshToken" = @__token_RefreshToken_0
LIMIT 1
2022-10-30 19:32:10.014 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:32:10.014 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer) in 9.2434ms
2022-10-30 19:32:10.014 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.GetRefreshToken (CarDealer)'
2022-10-30 19:32:10.014 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/Refresh application/json 485 - 200 - application/json;+charset=utf-8 11.9034ms
2022-10-30 19:32:26.589 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car - -
2022-10-30 19:32:26.591 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:32:26.592 +01:00 [INF] Route matched with {action = "GetAll", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:32:26.594 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:32:26.603 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CarManufacturerId", "c"."CarType", "c"."Hp", "c"."Model", "c"."Seats", "c"."Year"
FROM "Cars" AS "c"
2022-10-30 19:32:26.603 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarDealer.Domain.GetCarDto, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-30 19:32:26.604 +01:00 [INF] Executed action CarDealer.Controllers.CarController.GetAll (CarDealer) in 11.8176ms
2022-10-30 19:32:26.604 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:32:26.604 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car - - - 200 - application/json;+charset=utf-8 15.1092ms
2022-10-30 19:32:36.519 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:32:36.519 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:32:36.519 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:32:36.521 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:32:36.523 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 3.6238ms
2022-10-30 19:32:36.523 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:32:36.524 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:32:36.526 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 7.4830ms
2022-10-30 19:40:08.016 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:40:08.419 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:40:08.420 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:40:08.423 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:40:08.423 +01:00 [INF] Hosting environment: Development
2022-10-30 19:40:08.423 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:40:09.029 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:40:09.442 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:40:09.454 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 427.9144ms
2022-10-30 19:40:09.487 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 44.7205ms
2022-10-30 19:40:09.573 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:40:09.627 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 53.4261ms
2022-10-30 19:40:09.812 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:40:10.094 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 281.2885ms
2022-10-30 19:40:17.580 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:40:17.664 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:40:17.673 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:40:17.983 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:40:17.994 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 316.9071ms
2022-10-30 19:40:17.998 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:40:18.001 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:40:18.035 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 454.8704ms
2022-10-30 19:40:36.894 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMakeById?id=1 - -
2022-10-30 19:40:36.896 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:40:36.910 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers(Int32) on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:40:37.822 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:40:38.396 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Country", "c"."Make"
FROM "CarManufacturers" AS "c"
WHERE "c"."Id" = @__id_0
LIMIT 1
2022-10-30 19:40:38.472 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.CarManufacturer'.
2022-10-30 19:40:38.474 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 1563.5508ms
2022-10-30 19:40:38.474 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:40:38.481 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMakeById?id=1 - - - 200 - application/json;+charset=utf-8 1587.1459ms
2022-10-30 19:40:48.723 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:40:48.725 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:40:48.727 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:40:48.760 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:40:48.767 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:40:49.052 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:40:49.080 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:40:49.081 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 354.4749ms
2022-10-30 19:40:49.081 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:40:49.081 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 358.2743ms
2022-10-30 19:41:03.179 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car - -
2022-10-30 19:41:03.186 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-10-30 19:41:03.195 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:41:03.195 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car - - - 401 0 - 16.2538ms
2022-10-30 19:41:13.425 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car - -
2022-10-30 19:41:13.528 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:41:13.529 +01:00 [INF] Route matched with {action = "GetAll", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:41:13.581 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:41:13.586 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CarManufacturerId", "c"."CarType", "c"."Hp", "c"."Model", "c"."Seats", "c"."Year"
FROM "Cars" AS "c"
2022-10-30 19:41:13.586 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarDealer.Domain.GetCarDto, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-30 19:41:13.587 +01:00 [INF] Executed action CarDealer.Controllers.CarController.GetAll (CarDealer) in 57.8741ms
2022-10-30 19:41:13.587 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:41:13.588 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car - - - 200 - application/json;+charset=utf-8 162.3528ms
2022-10-30 19:41:31.889 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 103
2022-10-30 19:41:31.891 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:41:31.893 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:41:31.931 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:41:32.017 +01:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cars" ("CarManufacturerId", "CarType", "Hp", "Model", "Seats", "Year")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT "Id"
FROM "Cars"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:41:32.033 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2022-10-30 19:41:32.145 +01:00 [FTL] An error occurred while saving the entity changes. See the inner exception for details.
2022-10-30 19:41:32.146 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:41:32.146 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 253.2884ms
2022-10-30 19:41:32.146 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:41:32.146 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 103 - 400 - text/plain;+charset=utf-8 257.5747ms
2022-10-30 19:42:27.923 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:42:28.275 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:42:28.275 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:42:28.277 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:42:28.277 +01:00 [INF] Hosting environment: Development
2022-10-30 19:42:28.278 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:42:29.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:42:29.738 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 372.5123ms
2022-10-30 19:42:29.830 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:42:29.830 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:42:29.841 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 11.1734ms
2022-10-30 19:42:29.879 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.7706ms
2022-10-30 19:42:30.004 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:42:30.227 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 222.3528ms
2022-10-30 19:42:38.059 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:42:38.149 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:42:38.169 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:42:39.303 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:42:39.895 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:42:40.250 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:42:40.281 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:42:40.288 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2113.347ms
2022-10-30 19:42:40.289 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:42:40.297 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 2237.2822ms
2022-10-30 19:43:04.231 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 103
2022-10-30 19:43:04.322 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:43:04.323 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:43:04.492 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:43:04.576 +01:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cars" ("CarManufacturerId", "CarType", "Hp", "Model", "Seats", "Year")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT "Id"
FROM "Cars"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:43:04.615 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2022-10-30 19:43:04.714 +01:00 [FTL] An error occurred while saving the entity changes. See the inner exception for details.
2022-10-30 19:43:04.715 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:43:04.715 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 392.0383ms
2022-10-30 19:43:04.715 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:43:04.715 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 103 - 400 - text/plain;+charset=utf-8 484.2438ms
2022-10-30 19:46:05.416 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:46:05.791 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:46:05.791 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:46:05.796 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:46:05.796 +01:00 [INF] Hosting environment: Development
2022-10-30 19:46:05.796 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:46:06.321 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:46:06.715 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 397.6298ms
2022-10-30 19:46:06.835 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:46:06.835 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:46:06.850 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 15.4155ms
2022-10-30 19:46:06.874 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 39.3164ms
2022-10-30 19:46:07.039 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:46:07.267 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 227.4395ms
2022-10-30 19:46:14.294 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:46:14.395 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:46:14.441 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:46:15.660 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:46:16.290 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:46:16.648 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:46:16.677 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:46:16.685 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2238.1617ms
2022-10-30 19:46:16.686 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:46:16.694 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 2400.4555ms
2022-10-30 19:46:33.663 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car - -
2022-10-30 19:46:33.749 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:46:33.750 +01:00 [INF] Route matched with {action = "GetAll", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:46:33.850 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:46:33.861 +01:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CarManufacturerId", "c"."CarType", "c"."Hp", "c"."Make", "c"."Model", "c"."Seats", "c"."Year"
FROM "Cars" AS "c"
2022-10-30 19:46:33.893 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such column: c.Make'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements(Stopwatch timer)+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements(Stopwatch timer)+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such column: c.Make'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements(Stopwatch timer)+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements(Stopwatch timer)+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2022-10-30 19:46:33.993 +01:00 [FTL] SQLite Error 1: 'no such column: c.Make'.
2022-10-30 19:46:33.994 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:46:33.994 +01:00 [INF] Executed action CarDealer.Controllers.CarController.GetAll (CarDealer) in 243.5662ms
2022-10-30 19:46:33.994 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:46:33.994 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car - - - 400 - text/plain;+charset=utf-8 331.4103ms
2022-10-30 19:46:40.619 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:46:40.621 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:46:40.622 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:46:40.623 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:46:40.630 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 7.7211ms
2022-10-30 19:46:40.631 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:46:40.635 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:46:40.644 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 25.7097ms
2022-10-30 19:46:55.722 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 100
2022-10-30 19:46:55.723 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:46:55.724 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:46:55.793 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:46:55.863 +01:00 [ERR] Failed executing DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 3), @p4='?' (Size = 6), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cars" ("CarManufacturerId", "CarType", "Hp", "Make", "Model", "Seats", "Year")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT "Id"
FROM "Cars"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:46:55.869 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'table Cars has no column named Make'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements(Stopwatch timer)+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements(Stopwatch timer)+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'table Cars has no column named Make'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements(Stopwatch timer)+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements(Stopwatch timer)+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2022-10-30 19:46:55.911 +01:00 [FTL] An error occurred while saving the entity changes. See the inner exception for details.
2022-10-30 19:46:55.911 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:46:55.911 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 186.78ms
2022-10-30 19:46:55.911 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:46:55.911 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 100 - 400 - text/plain;+charset=utf-8 189.0228ms
2022-10-30 19:47:48.858 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:48:01.483 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:48:01.612 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-10-30 19:48:01.620 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-10-30 19:48:01.635 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2022-10-30 19:48:01.649 +01:00 [INF] Applying migration '20221030184749_Be'.
2022-10-30 19:48:01.696 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Cars" ADD "Make" TEXT NOT NULL DEFAULT '';
2022-10-30 19:48:01.696 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20221030184749_Be', '6.0.10');
2022-10-30 19:48:07.856 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:48:08.220 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:48:08.221 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:48:08.225 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:48:08.225 +01:00 [INF] Hosting environment: Development
2022-10-30 19:48:08.225 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:48:08.942 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:48:09.289 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 351.9458ms
2022-10-30 19:48:09.402 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:48:09.402 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:48:09.410 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 7.2790ms
2022-10-30 19:48:09.429 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 26.9167ms
2022-10-30 19:48:09.582 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:48:09.792 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 210.1833ms
2022-10-30 19:48:32.395 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/register application/json 182
2022-10-30 19:48:32.484 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Register (CarDealer)'
2022-10-30 19:48:32.505 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(CarDealer.Domain.Auth.RegisterDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:48:33.619 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:48:34.185 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Username" = @__req_Username_0)
2022-10-30 19:48:42.483 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Register (CarDealer) in 9971.7476ms
2022-10-30 19:48:42.485 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Register (CarDealer)'
2022-10-30 19:48:42.489 +01:00 [ERR] An unhandled exception has occurred while executing the request.
CarDealer.Exceptions.UserException: Username/Email is already registered
   at CarDealer.Service.Implementation.AuthService.Register(RegisterDto req) in C:\Users\Work\source\repos\CarDealer\CarDealer\Service\Implementation\AuthService.cs:line 49
   at CarDealer.Controllers.AuthController.Register(RegisterDto req) in C:\Users\Work\source\repos\CarDealer\CarDealer\Controllers\AuthController.cs:line 22
   at lambda_method2(Closure , Object , Object[] )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:48:42.553 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/register application/json 182 - 500 - text/plain;+charset=utf-8 10158.4901ms
2022-10-30 19:48:55.193 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:48:55.200 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:48:55.201 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:48:55.216 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:48:55.266 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:48:55.608 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:48:55.642 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:48:55.644 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 443.5779ms
2022-10-30 19:48:55.644 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:48:55.645 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 451.2913ms
2022-10-30 19:49:10.524 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car - -
2022-10-30 19:49:10.615 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:49:10.616 +01:00 [INF] Route matched with {action = "GetAll", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:49:10.762 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:49:10.768 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CarManufacturerId", "c"."CarType", "c"."Hp", "c"."Make", "c"."Model", "c"."Seats", "c"."Year"
FROM "Cars" AS "c"
2022-10-30 19:49:10.768 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarDealer.Domain.GetCarDto, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-30 19:49:10.770 +01:00 [INF] Executed action CarDealer.Controllers.CarController.GetAll (CarDealer) in 154.3214ms
2022-10-30 19:49:10.770 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.GetAll (CarDealer)'
2022-10-30 19:49:10.770 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car - - - 200 - application/json;+charset=utf-8 246.1550ms
2022-10-30 19:49:15.047 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 19:49:15.047 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:49:15.048 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:49:15.049 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 19:49:15.055 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 6.4317ms
2022-10-30 19:49:15.055 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:49:15.056 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 19:49:15.059 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 12.3948ms
2022-10-30 19:49:31.692 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMakeById?id=1 - -
2022-10-30 19:49:31.694 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:49:31.702 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers(Int32) on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 19:49:31.715 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:49:31.720 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Country", "c"."Make"
FROM "CarManufacturers" AS "c"
WHERE "c"."Id" = @__id_0
LIMIT 1
2022-10-30 19:49:31.730 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.CarManufacturer'.
2022-10-30 19:49:31.731 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 28.1438ms
2022-10-30 19:49:31.731 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 19:49:31.731 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMakeById?id=1 - - - 200 - application/json;+charset=utf-8 38.7823ms
2022-10-30 19:49:40.985 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 100
2022-10-30 19:49:40.986 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:49:40.988 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:49:41.012 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:49:41.081 +01:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 3), @p4='?' (Size = 6), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cars" ("CarManufacturerId", "CarType", "Hp", "Make", "Model", "Seats", "Year")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT "Id"
FROM "Cars"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:49:41.090 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2022-10-30 19:49:41.137 +01:00 [FTL] An error occurred while saving the entity changes. See the inner exception for details.
2022-10-30 19:49:41.138 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:49:41.138 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 150.3791ms
2022-10-30 19:49:41.138 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:49:41.138 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 100 - 400 - text/plain;+charset=utf-8 152.9074ms
2022-10-30 19:49:50.521 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car/Id - -
2022-10-30 19:49:50.523 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.GetById (CarDealer)'
2022-10-30 19:49:50.524 +01:00 [INF] Route matched with {action = "GetById", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(Int32) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:49:50.527 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:49:50.531 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CarManufacturerId", "c"."CarType", "c"."Hp", "c"."Make", "c"."Model", "c"."Seats", "c"."Year"
FROM "Cars" AS "c"
WHERE "c"."Id" = @__id_0
LIMIT 1
2022-10-30 19:49:50.563 +01:00 [ERR] Car with Id : 0 does not exist
2022-10-30 19:49:50.563 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-10-30 19:49:50.564 +01:00 [INF] Executed action CarDealer.Controllers.CarController.GetById (CarDealer) in 39.9273ms
2022-10-30 19:49:50.564 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.GetById (CarDealer)'
2022-10-30 19:49:50.564 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car/Id - - - 0 - text/plain;+charset=utf-8 42.2411ms
2022-10-30 19:49:55.870 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car/Id - -
2022-10-30 19:49:55.877 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:49:55', Current time: '30/10/2022 18:49:55'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-30 19:49:55.879 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:49:55', Current time: '30/10/2022 18:49:55'.
2022-10-30 19:49:55.880 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2022-10-30 19:49:55.890 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:49:55.890 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car/Id - - - 401 0 - 20.4619ms
2022-10-30 19:49:59.754 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/Car/Id?id=1 - -
2022-10-30 19:49:59.755 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:49:55', Current time: '30/10/2022 18:49:59'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-10-30 19:49:59.755 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '30/10/2022 18:49:55', Current time: '30/10/2022 18:49:59'.
2022-10-30 19:49:59.756 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2022-10-30 19:49:59.756 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:49:59.756 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/Car/Id?id=1 - - - 401 0 - 1.4940ms
2022-10-30 19:51:16.234 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:51:16.684 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:51:16.684 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:51:16.688 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:51:16.688 +01:00 [INF] Hosting environment: Development
2022-10-30 19:51:16.689 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:51:17.365 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:51:17.847 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 490.4555ms
2022-10-30 19:51:17.985 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:51:17.985 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:51:17.999 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 13.3255ms
2022-10-30 19:51:18.020 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 35.0890ms
2022-10-30 19:51:18.168 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:51:18.411 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 242.4595ms
2022-10-30 19:51:24.921 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 103
2022-10-30 19:51:25.014 +01:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2022-10-30 19:51:25.021 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-10-30 19:51:25.021 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 103 - 401 0 - 100.1446ms
2022-10-30 19:51:32.949 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:51:32.964 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:51:32.988 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:51:34.120 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:51:34.747 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:51:35.093 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:51:35.129 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:51:35.138 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2143.1138ms
2022-10-30 19:51:35.138 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:51:35.147 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 2198.5077ms
2022-10-30 19:51:43.860 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 103
2022-10-30 19:51:43.952 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:51:43.954 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:52:19.674 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:52:19.751 +01:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 6), @p4='?' (Size = 6), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cars" ("CarManufacturerId", "CarType", "Hp", "Make", "Model", "Seats", "Year")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT "Id"
FROM "Cars"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:52:19.784 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2022-10-30 19:52:19.827 +01:00 [FTL] An error occurred while saving the entity changes. See the inner exception for details.
2022-10-30 19:52:19.828 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:52:19.828 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 35874.5958ms
2022-10-30 19:52:19.829 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:52:19.829 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 103 - 400 - text/plain;+charset=utf-8 35968.8794ms
2022-10-30 19:53:36.591 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:53:37.013 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:53:37.013 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:53:37.018 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:53:37.018 +01:00 [INF] Hosting environment: Development
2022-10-30 19:53:37.018 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:53:37.637 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:53:38.025 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 393.9960ms
2022-10-30 19:53:38.155 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:53:38.155 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:53:38.170 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 14.3559ms
2022-10-30 19:53:38.199 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 43.9319ms
2022-10-30 19:53:38.342 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:53:38.567 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 225.3026ms
2022-10-30 19:53:45.399 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:53:45.489 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:53:45.509 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:53:46.673 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:53:47.341 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:53:47.767 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:53:47.799 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:53:47.808 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2292.964ms
2022-10-30 19:53:47.809 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:53:47.818 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 2418.7953ms
2022-10-30 19:54:02.066 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 103
2022-10-30 19:54:02.160 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:54:02.161 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:54:02.287 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:54:02.365 +01:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 6), @p4='?' (Size = 6), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cars" ("CarManufacturerId", "CarType", "Hp", "Make", "Model", "Seats", "Year")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT "Id"
FROM "Cars"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:54:02.404 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2022-10-30 19:54:02.499 +01:00 [FTL] An error occurred while saving the entity changes. See the inner exception for details.
2022-10-30 19:54:02.500 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:54:02.500 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 339.1291ms
2022-10-30 19:54:02.500 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:54:02.501 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 103 - 400 - text/plain;+charset=utf-8 435.1110ms
2022-10-30 19:54:31.712 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 103
2022-10-30 19:54:31.719 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:54:31.719 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:54:39.727 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:55:00.979 +01:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 6), @p4='?' (Size = 6), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cars" ("CarManufacturerId", "CarType", "Hp", "Make", "Model", "Seats", "Year")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT "Id"
FROM "Cars"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:55:00.980 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2022-10-30 19:55:01.014 +01:00 [FTL] An error occurred while saving the entity changes. See the inner exception for details.
2022-10-30 19:55:01.015 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:55:01.015 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 29296.0475ms
2022-10-30 19:55:01.015 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:55:01.015 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 103 - 400 - text/plain;+charset=utf-8 29303.7840ms
2022-10-30 19:57:34.139 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 19:57:34.532 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 19:57:34.532 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 19:57:34.536 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 19:57:34.536 +01:00 [INF] Hosting environment: Development
2022-10-30 19:57:34.536 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 19:57:35.394 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 19:57:35.766 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 373.7171ms
2022-10-30 19:57:35.878 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 19:57:35.878 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 19:57:35.896 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 18.3174ms
2022-10-30 19:57:35.914 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 36.1973ms
2022-10-30 19:57:36.066 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 19:57:36.280 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 214.7889ms
2022-10-30 19:57:45.950 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51
2022-10-30 19:57:46.035 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:57:46.055 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(CarDealer.Domain.Auth.LoginDto) on controller CarDealer.Controllers.AuthController (CarDealer).
2022-10-30 19:57:47.204 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:57:47.817 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__req_Username_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Email", "u"."FirstName", "u"."LastName", "u"."PasswordHash", "u"."PasswordSalt", "u"."RefreshToken", "u"."Role", "u"."TokenCreated", "u"."TokenExpires", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Username" = @__req_Username_0
LIMIT 1
2022-10-30 19:57:48.160 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "RefreshToken" = @p0
WHERE "Id" = @p1;
SELECT changes();
2022-10-30 19:57:48.189 +01:00 [INF] Executing OkObjectResult, writing value of type 'CarDealer.Models.Token'.
2022-10-30 19:57:48.196 +01:00 [INF] Executed action CarDealer.Controllers.AuthController.Login (CarDealer) in 2136.1978ms
2022-10-30 19:57:48.197 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.AuthController.Login (CarDealer)'
2022-10-30 19:57:48.205 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Auth/login application/json 51 - 200 - application/json;+charset=utf-8 2255.3922ms
2022-10-30 19:58:02.925 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7145/api/Car application/json 103
2022-10-30 19:58:03.014 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:58:03.015 +01:00 [INF] Route matched with {action = "AddCar", controller = "Car"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult AddCar(CarDealer.Domain.AddCarDto) on controller CarDealer.Controllers.CarController (CarDealer).
2022-10-30 19:58:03.138 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 19:58:03.221 +01:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 6), @p4='?' (Size = 6), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cars" ("CarManufacturerId", "CarType", "Hp", "Make", "Model", "Seats", "Year")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT "Id"
FROM "Cars"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2022-10-30 19:58:03.256 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'CarGarage.DataAccess.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2022-10-30 19:58:03.351 +01:00 [FTL] An error occurred while saving the entity changes. See the inner exception for details.
2022-10-30 19:58:03.351 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-10-30 19:58:03.352 +01:00 [INF] Executed action CarDealer.Controllers.CarController.AddCar (CarDealer) in 336.3567ms
2022-10-30 19:58:03.352 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarController.AddCar (CarDealer)'
2022-10-30 19:58:03.352 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7145/api/Car application/json 103 - 400 - text/plain;+charset=utf-8 426.7360ms
2022-10-30 20:01:37.087 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 20:01:48.811 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 20:01:48.944 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2022-10-30 20:01:49.076 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2022-10-30 20:01:49.086 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-10-30 20:01:49.088 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2022-10-30 20:01:49.102 +01:00 [INF] Applying migration '20221030190137_Br'.
2022-10-30 20:01:49.132 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CarManufacturers" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_CarManufacturers" PRIMARY KEY AUTOINCREMENT,
    "Make" TEXT NOT NULL,
    "Country" TEXT NOT NULL
);
2022-10-30 20:01:49.132 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY AUTOINCREMENT,
    "Role" TEXT NOT NULL,
    "FirstName" TEXT NOT NULL,
    "LastName" TEXT NOT NULL,
    "Username" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "PasswordHash" BLOB NOT NULL,
    "PasswordSalt" BLOB NOT NULL,
    "RefreshToken" TEXT NOT NULL,
    "TokenCreated" TEXT NOT NULL,
    "TokenExpires" TEXT NOT NULL
);
2022-10-30 20:01:49.133 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Cars" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Cars" PRIMARY KEY AUTOINCREMENT,
    "CarManufacturerId" INTEGER NOT NULL,
    "Make" TEXT NOT NULL,
    "Model" TEXT NOT NULL,
    "Seats" INTEGER NOT NULL,
    "Year" INTEGER NOT NULL,
    "Hp" INTEGER NOT NULL,
    "CarType" INTEGER NOT NULL,
    CONSTRAINT "FK_Cars_CarManufacturers_CarManufacturerId" FOREIGN KEY ("CarManufacturerId") REFERENCES "CarManufacturers" ("Id") ON DELETE CASCADE
);
2022-10-30 20:01:49.133 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Cars_CarManufacturerId" ON "Cars" ("CarManufacturerId");
2022-10-30 20:01:49.133 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20221030190137_Br', '6.0.10');
2022-10-30 20:01:56.493 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 20:01:56.881 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 20:01:56.882 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 20:01:56.891 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 20:01:56.891 +01:00 [INF] Hosting environment: Development
2022-10-30 20:01:56.891 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 20:01:57.674 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 20:01:58.116 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 447.3206ms
2022-10-30 20:01:58.249 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 20:01:58.250 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 20:01:58.266 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 16.2118ms
2022-10-30 20:01:58.322 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 72.9761ms
2022-10-30 20:01:58.514 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 20:01:59.005 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 491.5754ms
2022-10-30 20:02:03.018 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 20:02:03.112 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 20:02:03.122 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 20:02:03.452 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 20:02:03.466 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 337.1495ms
2022-10-30 20:02:03.470 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 20:02:03.473 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 20:02:03.512 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 494.0878ms
2022-10-30 20:02:45.129 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 20:02:53.976 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 20:03:01.750 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 20:03:01.891 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-10-30 20:03:01.903 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-10-30 20:03:01.919 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2022-10-30 20:03:01.940 +01:00 [INF] Applying migration '20221030190254_Bq'.
2022-10-30 20:03:01.983 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20221030190254_Bq', '6.0.10');
2022-10-30 20:03:06.607 +01:00 [INF] User profile is available. Using 'C:\Users\Filip\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-30 20:03:07.043 +01:00 [INF] Now listening on: https://localhost:7145
2022-10-30 20:03:07.044 +01:00 [INF] Now listening on: http://localhost:5145
2022-10-30 20:03:07.054 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-30 20:03:07.054 +01:00 [INF] Hosting environment: Development
2022-10-30 20:03:07.054 +01:00 [INF] Content root path: C:\Users\Work\source\repos\CarDealer\CarDealer\
2022-10-30 20:03:07.914 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/index.html - -
2022-10-30 20:03:08.276 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/index.html - - - 200 - text/html;charset=utf-8 366.0483ms
2022-10-30 20:03:08.380 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_vs/browserLink - -
2022-10-30 20:03:08.380 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - -
2022-10-30 20:03:08.391 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_framework/aspnetcore-browser-refresh.js - - - 200 11988 application/javascript;+charset=utf-8 10.5576ms
2022-10-30 20:03:08.410 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 29.7144ms
2022-10-30 20:03:08.552 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - -
2022-10-30 20:03:08.761 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.9018ms
2022-10-30 20:03:12.032 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - -
2022-10-30 20:03:12.186 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 20:03:12.197 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers() on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 20:03:12.537 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-10-30 20:03:12.549 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 346.7474ms
2022-10-30 20:03:12.551 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 20:03:12.555 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported. The unsupported member type is located on type 'System.Func`1[System.Collections.Generic.List`1[CarDealer.Models.CarManufacturer]]'. Path: $.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Func`1[[System.Collections.Generic.List`1[[CarDealer.Models.CarManufacturer, CarDealer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-30 20:03:12.591 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMake - - - 500 - text/plain;+charset=utf-8 558.9944ms
2022-10-30 20:03:23.049 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMakeById - -
2022-10-30 20:03:23.051 +01:00 [INF] Executing endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 20:03:23.067 +01:00 [INF] Route matched with {action = "GetAllCarManufacturers", controller = "CarManufacturer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllCarManufacturers(Int32) on controller CarDealer.Controllers.CarManufacturerController (CarDealer).
2022-10-30 20:03:24.047 +01:00 [INF] Entity Framework Core 6.0.10 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.10' with options: None
2022-10-30 20:03:24.633 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Country", "c"."Make"
FROM "CarManufacturers" AS "c"
WHERE "c"."Id" = @__id_0
LIMIT 1
2022-10-30 20:03:24.649 +01:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2022-10-30 20:03:24.650 +01:00 [INF] Executed action CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer) in 1582.7717ms
2022-10-30 20:03:24.650 +01:00 [INF] Executed endpoint 'CarDealer.Controllers.CarManufacturerController.GetAllCarManufacturers (CarDealer)'
2022-10-30 20:03:24.655 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7145/api/CarManufacturer/GetAllMakeById - - - 204 0 - 1606.2165ms
